- defaults:
        link:
                create: true
                relink: true
                force: true

- clean: ['~', '~/.config']

- link:
        ~/.config/user-dirs.dirs: config/user-dirs
        ~/.icons: icons
        ~/.fonts: fonts
        ~/.ghci: ghci/ghcirc
        ~/.profile: zsh/profile
        ~/.ptpython/config.py: ptpython/ptpython_config.py
        ~/.vim: vim/vim
        ~/.vimrc: vim/vimrc
        ~/.zshrc: zsh/zshrc

- shell:
        - 
            command: 
                '_GIT_FILLED_FIELDS=$(cat ~/.gitconfig | grep -e "\(name\|email\) =\W*\w\+" | wc -l) &&
                 _GIT_ALREADY_SETUP=$(( $_GIT_FILLED_FIELDS == 2 )) &&
                 (( $_GIT_ALREADY_SETUP != 1 )) && (
                    echo "Enter your full name (for git identifaction):" &&
                    read _USER_FULLNAME &&
                    echo "Enter your email address (for git identification):" &&
                    read _USER_EMAIL &&
                    cat git/gitconfig |
                        sed "/name =\W*$/  s/name.*$/name = "$_USER_FULLNAME"/" |
                        sed "/email =\W*$/ s/email.*$/email = "$_USER_EMAIL"/" >
                        ~/.gitconfig
                 ) || (
                     echo "git already setup"
                 )'
            stdin: true
            stdout: true
        - [git submodule update --init --recursive --depth 1 || git submodule update --recursive --depth 1, Updating submodules]
        - [mkdir ~/doc/desktop -p && mkdir ~/tmp -p && mkdir ~/doc/music -p && mkdir ~/doc/images -p && mkdir ~/.templates -p && mkdir ~/doc/shared -p && mkdir ~/doc/videos -p, Creating dirs for user-dirs]
        - [xdg-user-dirs-update && (xdg-user-dirs-gtk-update || echo), Updating user-dirs]
        - [ls ~/.ssh/*.pub || (ssh-keygen -t rsa -f $HOME/.ssh/id_rsa && ssh-keygen -t rsa -f $HOME/.ssh/id_rsa_nopasswd -N ""), Generating ssh keys]
        - [vim +PluginInstall +qall, Installing vim plugins]
        - ["ls ~/.oh-my-zsh || git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh", Installing oh-my-zsh]
        - [ls ~/.dotfiles/icons/*Papirus* || ln -s ~/.dotfiles/icons/.repositories/papirus-icon-theme/*Papirus* ~/.dotfiles/icons/, Installing Papirus icons]
